<title>Runway</title>
<link rel="stylesheet" href="../grid.css">

<script type="module">
  import { Frog } from '../src/Frog.js';
  import { Turtle } from '../src/Turtle.js';
  import { AnimatedCanvas } from '../src/common/AnimatedCanvas.js';

  const TILE_SIZE = 64;

  const entities = [];

  const frogs = [ 'red', 'orange', 'yellow', 'lime', 'dodgerblue', 'purple' ].map( ( color, i ) =>
    new Frog( { x: ( i + 1.5 ) * TILE_SIZE, y: ( 1.5 ) * TILE_SIZE, size: TILE_SIZE, color: color } )
  );

  const turtle = new Turtle( { x: 128, y: 320, size: TILE_SIZE } );

  const canvas = new AnimatedCanvas();

  canvas.update = ( dt ) => {
    turtle.animationTime += dt;
    frogs.forEach( e => e.animationTime += dt );
  }

  canvas.draw = ( ctx ) => {

    // Grass
    // ctx.fillStyle = 'darkgreen';
    // ctx.fillRect( 0, 0, 640, 640 );

    // Bush

    // Road
    // drawRoad( ctx, new Path2D( 'M 32,32 L 320,32 Q 352,32 352,64 L 352,320' ) );

    // Sidewalk

    // Snake
    // (yellow, red, black stripes, or whatever the deadly order is...)
    // slither across the screen

    // Car

    // Water
    // ctx.fillStyle = 'darkblue';
    // ctx.fillRect( 32, 128, 256, 320 );

    // // Log
    // drawLog( ctx, new Path2D( 'M 32,128 L 160,128' ) );

    // Turtle
    turtle.draw( ctx );

    // Lilypad

    // Frog
    frogs.forEach( e => e.draw( ctx ) );
  };

  // canvas.redraw();
  canvas.start();

  function drawRoad( ctx, path ) {
    ctx.save();

    ctx.strokeStyle = 'gray';
    ctx.lineWidth = 64;
    ctx.lineCap = 'square';
    ctx.stroke( path );

    ctx.strokeStyle = 'yellow';
    ctx.lineWidth = 4;
    ctx.lineCap = 'butt';
    ctx.setLineDash( [ 16, 16 ] );
    ctx.stroke( path );

    ctx.restore();
  }

  function drawLog( ctx, path ) {
    ctx.save();

    ctx.strokeStyle = 'brown';
    ctx.lineWidth = 32;
    ctx.lineCap = 'round';
    ctx.stroke( path );

    ctx.strokeStyle = 'black';
    ctx.lineWidth = 1;
    ctx.lineCap = 'butt';
    ctx.setLineDash( [ 8, 16, 8, 32, 8, 64 ] );
    ctx.stroke( path );

    ctx.restore();
  }



</script>